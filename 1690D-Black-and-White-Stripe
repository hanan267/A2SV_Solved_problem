from collections import defaultdict
t = int(input())
for _ in range(t):
  n, k = map(int, input().split())
  a = input()
  # print(n,k, a)
  l = 0
  w = defaultdict(int)
  # print(w)
  for i in range(k):
    w[a[i]] += 1
  minW = w["W"]
  for r in range(k,n):
    w[a[r]] += 1
    w[a[l]] -= 1
    minW = min(w["W"], minW)
    l += 1
  print(minW)
    

    

